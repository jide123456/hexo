---
title: 编写文字样式时，行高带来的影响
date: 2018-07-21 14:10:12
categories: css
tags:
	- 解决问题
---

当我们在编写文字样式时，明明是按照设计给的标注写的样式，但文字的间距，却可能会大于设计搞。这一现象，是受文字的行高属性影响导致的。

<!-- more --> 

## 现象

列如，下图1是我随便找的一个标注，下图2是我根据标注写的页面。经手工测量，两行文字的间距为36px，明显超出标注里的11px。

{% asset_img 1.jpg 标注 %}
<p style="text-align: center"><i>图1</i></p>

{% asset_img 2.jpg 页面截图 %}
<p style="text-align: center"><i>图2</i></p>

## 原因

造成这一现象的原因是：浏览器不像ps，不是以文字的实际大小计算外边距，而是以文字的盒模型的大小计算外边距。打开浏览器调试工具我们可以发现，文字外边距是从文字盒模型的底部开始计算的。所以当我们按照标注给的值设置外边距时，文字实际间距会大于设计稿的间距。 

文字的盒模型会被文字行高撑开，行高越大，盒模型越大，偏差也就越大。

从图3可以看出，两行文字间的实际距离等于【第一行文字底部到他的盒模型底部的距离】加上【外边距】加上【第二行文字头部到盒模型头部的距离】。

{% asset_img 3.jpg 调试工具截图 %}
<p style="text-align: center"><i>图3</i></p>

## 怎么解决

怎么解决？方法有三：

### 方法一：将行高设置为1

将行高设置成1后，文字大小与盒模型大小相等，【第一行文字底部到他的盒模型底部的距离】、【第二行文字头部到盒模型头部的距离】这两个值为0，两行文字间的间距就等于设置的外边距（参考第二段的公式理解）。

*此方法仅适用于单行文字*

### 方法二：手动计算外边距

我们知道，文字间的间距由3部分组成，因此我们可以手动计算出外边距值。 例如（假定设计稿中）第一行文字的大小为16px，第二行文字的大小为12px，他们的间距是20px。假定行高为1.5。那么实际设定的外边距值就是：20 - (16 \* 1.5 - 16) / 2 - (12 \* 1.5 - 12) / 2 = 13(px)。

*此方法适用于任何情况，但计算过程繁琐*

ps：文字的盒模型大小 = 文字大小 \* 文字行高
ps：文字底部到他的盒模型底部的距离 = (文字大小 \* 文字行高 - 文字大小) / 2

### 方法三：UI标注时连带着行高一起标注

对设计专业度要求较高，详见[这篇文章](https://www.jianshu.com/p/55f1d2c9a82e)

## 结语

本文分析了实际开发中，文字的间距可能与设计稿不一致的现象及原因，并提供了三个解决方案，希望对你有所帮助。